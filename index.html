<!doctype html>
<html lang=en>
  <head>
    <meta charset=utf-8>
    <meta name=viewport content='width=device-width, initial-scale=1' />
    <title>Library</title>
    <style>
      html {box-sizing: border-box;}
      *, *:before, *:after {box-sizing: inherit;}
      body {
        margin: .5rem;
        background: whitesmoke;
      }
      .wrapper {
        display: inline-block;
      }
      .media {
        display: inline-block;
        margin: .5rem;
        vertical-align: top;
      }
      .cover {
        display: inline-block;
        background: -218px 0 no-repeat;
        width: 182px;
        position: relative;
        transform-origin: top left;
        border-radius: 3px;
        box-shadow: .5px .5px 1px 1px rgba(0, 0, 0, .15);
      }
    </style>
  </head>
  <body>
    <script>
      const library = [
        {title: 'Mega Man 6', coverURL: 'nes_megaman6.jpg'},
        {title: 'The Guardian Legend', coverURL: 'nes_theguardianlegend.jpg'},
        {title: 'Teenage Mutant Ninja Turtles III: The Manhattan Project', coverURL: 'nes_tmntiiithemanhattanproject.jpg'},
        {title: 'River City Ransom', coverURL: 'nes_rivercityransom.jpg'},
        {title: 'Solar Jetman', coverURL: 'nes_solarjetman.jpg'},
        {title: 'Super Mario Bros. 3', coverURL: 'nes_supermariobros3.jpg'},
        {title: 'Conker\'s Bad Fur Day', coverURL: 'n64_conkersbadfurday.jpg', coverOrientation: -90 },
        {title: 'The Last of Us Remastered', coverURL: 'ps4_lastofusremastered.jpg'}
      ]
      library.forEach(media => {
        const wrapper = document.createElement('div')
        wrapper.className = 'wrapper'
        const mediaContainer = document.createElement('div')
        wrapper.appendChild(mediaContainer)
        mediaContainer.className = 'media'
        const anchor = document.createElement('a')
        anchor.href = `assets/originals/${media.coverURL}`
        mediaContainer.appendChild(anchor)
        const cover = document.createElement('div')
        anchor.appendChild(cover)
        cover.className = 'cover'
        cover.style['background-image'] = `url(assets/thumbnails/${media.coverURL})`
        if (media.coverOrientation) {
          cover.style['transform'] = `rotate(${media.coverOrientation}deg)`
        }
        const sizer = new Image()
        sizer.onload = () => {
          if (media.coverOrientation % 90 === 0) {
            const height = cover.getBoundingClientRect().height
            cover.style.top = `${height}px`
            mediaContainer.style.height = `${height}px`
            mediaContainer.style.width = `${sizer.height}px`
          }
          cover.style.height = `${sizer.height}px`
        }
        sizer.src = `assets/thumbnails/${media.coverURL}`
        document.body.appendChild(wrapper)
      })
    </script>
  </body>
</html>